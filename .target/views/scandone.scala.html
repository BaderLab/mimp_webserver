@(job: Scan)

@main("Scan", "Scan", "Scan complete, see results below") {
	
		<link rel="stylesheet" type="text/css" href="@routes.Assets.at("datatable/main.css")">
		<link rel="stylesheet" type="text/css" href="@routes.Assets.at("datatable/DT_bootstrap.css")">
		
		<script type="text/javascript" language="javascript" src="@routes.Assets.at("datatable/jquery.dataTables.js")"></script>
		<script type="text/javascript" language="javascript" src="@routes.Assets.at("datatable/DT_bootstrap.js")"></script>
		<script>
			
		
			var updateZoom = function(){
				/*console.log('Zoom updated!');
				$('img.logo')
				.wrap('<span style="display:inline-block;"></span>')
				.css('display', 'block')
				.parent()
				.zoom({
				    onZoomIn: function(){
					    $(this).siblings().css('visibility', 'hidden');
				    },
				    onZoomOut: function(){
					    $(this).siblings().css('visibility', 'visible');
				    }
				    
				});*/
			}
			
			$(document).ready(function(){
				updateZoom();
				
				$('#loss-badge').text($('#n_loss').text());
				$('#gain-badge').text($('#n_gain').text());
				$('#mut-badge').text($('#n_mut').text());
				
				// Show only gain or only loss on click of label
				$('#gain-label').click(function(){
					$('#search-input').val('Gain').trigger('keyup.DT');
					$('#search-input').focus();
				});
				$('#loss-label').click(function(){
					$('#search-input').val('Loss').trigger('keyup.DT');
					$('#search-input').focus();
				});
				
				// Update zoom on pagination change
				$('.pagination').click(updateZoom);
				$('select').change(updateZoom);
				$('#search-input').on('input', updateZoom);
				
				$('.tip-close').click(function(){
					el = $(this).parents('.alert');
					id = el.attr('id');
					console.log(id);
					//$.cookie(id, "clicked", { expires: 90 });
					el.hide();
				});
				
				$(document).keydown(function(e){
    if (e.keyCode == 37) { 
       console.log( "left pressed" );
       $('.previous a').click();
       return false;
    }
    if (e.keyCode == 39) { 
       console.log( "right pressed" );
       $('.next a').click();
       return false;
    }
});
				/*
				$('.alert').each(function() {
					console.log("foo "+this.id);
    				if($.cookie(this.id) == null){
    					$('#'+this.id).show();
    				}else{
    					$('#'+this.id).hide();
    				}
				});
				*/

			});
			
			function fnShowHide( iCol ){
				/* Get the DataTables object again - this is not a recreation, just a get of the object */
				var oTable = $('#example').dataTable();
	
				var bVis = oTable.fnSettings().aoColumns[iCol].bVisible;
				oTable.fnSetColumnVis( iCol, bVis ? false : true );
			}
		</script>
		<style>
		table {
   width: 200px; /*specify a width*/
   table-layout:fixed;
}
.alert-box{
display:none;
}

div.row{
	margin-bottom:15px;
}

		</style>
		
		<div>
	<center>
	<span id="loss-label" class="label label-danger">Loss <span class="badge" id="loss-badge">NA</span></span>
	<span id="gain-label" class="label label-success">Gain <span class="badge" id="gain-badge">NA</span></span>
	<span class="label label-default">Mutations <span class="badge" id="mut-badge">NA</span></span>
	</center>
	</div>
		
		<table class="table table-striped table-bordered" id="example" width="">
    <thead>
        <tr>
            <th width="8%">Gene</th>
            <th width="8%">P-site</th>
            <th width="8%">Mut.</th>
            <th width="7%">Dist.</th>
            <th width="18%">P-site Seq.</th>
            <th width="10%">Score (wt)</th>
            <th width="10%">Score (mt)</th>
            <th width="7%">Effect</th>
            <th width="28%">PWM</th>
        </tr>
    </thead>
    <tbody id="table-body">
		@Html(job.html)
    </tbody>
</table>
	
}
